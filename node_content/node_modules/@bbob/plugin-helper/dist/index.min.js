!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).BbobPluginHelper={})}(this,function(t){"use strict";let e=t=>"object"==typeof t&&!!t.tag,r=t=>"string"==typeof t,n=(t,e,r)=>Object.keys(t).reduce(e,r),i=t=>e(t)?t.content.reduce((t,e)=>t+i(e),0):r(t)?t.length:0,o=(t,e)=>{t.content.push(e)},s=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/(javascript|data|vbscript):/gi,"$1%3A"),a=(t,e)=>{let r=typeof e,n={boolean:()=>e?""+t:"",number:()=>`${t}="${e}"`,string:()=>`${t}="${s(e)}"`,object:()=>`${t}="${s(JSON.stringify(e))}"`};return n[r]?n[r]():""},g=t=>null==t?"":n(t,(e,r)=>[...e,a(r,t[r])],[""]).join(" "),l=t=>n(t,(e,r)=>t[r]===r?t[r]:null,null),c=(t,e)=>{let r=l(e);if(r){let n=a(t,r),i={...e};delete i[r];let o=g(i);return`${n}${o}`}return`${t}${g(e)}`};class u{attr(t,e){return void 0!==e&&(this.attrs[t]=e),this.attrs[t]}append(t){return o(this,t)}get length(){return i(this)}toTagStart({openTag:t="[",closeTag:e="]"}={}){let r=c(this.tag,this.attrs);return`${t}${r}${e}`}toTagEnd({openTag:t="[",closeTag:e="]"}={}){return`${t}/${this.tag}${e}`}toTagNode(){return new u(this.tag.toLowerCase(),this.attrs,this.content)}toString({openTag:t="[",closeTag:e="]"}={}){let r=0===this.content.length,n=this.content.reduce((r,n)=>r+n.toString({openTag:t,closeTag:e}),""),i=this.toTagStart({openTag:t,closeTag:e});return r?i:`${i}${n}${this.toTagEnd({openTag:t,closeTag:e})}`}constructor(t,e,r){this.tag=t,this.attrs=e,this.content=Array.isArray(r)?r:[r]}}u.create=(t,e={},r=[])=>new u(t,e,r),u.isOf=(t,e)=>t.tag===e,t.BACKSLASH="\\",t.CLOSE_BRAKET="]",t.EQ="=",t.F="\f",t.N="\n",t.OPEN_BRAKET="[",t.QUOTEMARK='"',t.R="\r",t.SLASH="/",t.SPACE=" ",t.TAB="	",t.TagNode=u,t.appendToNode=o,t.attrValue=a,t.attrsToString=g,t.escapeHTML=s,t.getNodeLength=i,t.getUniqAttr=l,t.isEOL=t=>"\n"===t,t.isStringNode=r,t.isTagNode=e});
